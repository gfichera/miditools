<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Sequence.lua - Reading, writing and manipulating MIDI data</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#functions">FUNCTIONS</a></li>
	<li><a href="#download">DOWNLOAD</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<hr />
<h2><a name="name">NAME</a></h2>
<p>Sequence.lua - Reading, writing and manipulating MIDI data</p>
<p>
</p>
<hr />
<h2><a name="synopsis">SYNOPSIS</a></h2>
<pre>
 local SEQ = require 'Sequence'</pre>
<p>
</p>
<hr />
<h2><a name="description">DESCRIPTION</a></h2>
<p>This module offers functions:  
<a href="#cycle"><code>cycle()</code></a>, <a href="#leibnitz"><code>leibnitz()</code></a>, <a href="#morse_thue"><code>morse_thue()</code></a>, <a href="#rabbit"><code>rabbit()</code></a>,
<a href="#push_and_half_shift"><code>push_and_half_shift()</code></a>, gen07() and gen09()
It provides at the Lua level what
<a href="http://www.pjb.com.au/midi/sequence.html">http://www.pjb.com.au/midi/sequence.html</a>
provides at the command line - and more :-)</p>
<p>The Morse-Thue, Leibnitz and Rabbit sequences are fractal and scale-free.</p>
<p>The Morse-Thue sequence, according to Schroeder, is named in honour of
the Norwegian mathematician Axel Thue (1863-1922), who introduced it in
1906 as an aperiodic, recursively computable sequence, and after Marston
Morse of Princeton (1892-1977) who discovered its significance in the
symbolic dynamics of certain nonlinear systems. The sequence for K=2
can be generated by taking the modulo 2 of the number of one-bits in
the binary nonnegative integers; or, starting with a 0, by repeatedly
applying the mapping 0 -&gt; 0 1 and 1 -&gt; 1 0; or by repeatedly appending
the complement. The first five stages are 0, then 0 1, then 0 1 1 0,
then 0 1 1 0 1 0 0 1, then 0 1 1 0 1 0 0 1 1 0 0 1 0 1 1 0.</p>
<p>With K=3 it can be generated by taking the modulo 3 of the number of
one-bits in the binary nonnegative integers; or recursively by adding
1 and then 2, modulo 3. The first three stages are 0, then 0 1 2, then
0 1 2 1 2 0 2 0 1.</p>
<p>The Leibnitz sequence can be generated by counting the one-bits in the
binary nonnegative integers; or by repeatedly appending the current
sequence with one added to it. The first five stages are 0, then 0 1,
then 0 1 1 2, then 0 1 1 2 1 2 2 3, then 0 1 1 2 1 2 2 3 1 2 2 3 2 3 3 4.</p>
<p>The Rabbit sequence (named by Schroeder) arises from Fibonacci's
rabbit-problem in the Liber Abaci (1202). The sequence can be generated by
starting with 1 and repeatedly applying the mapping 0 -&gt; 1 and 1 -&gt; 1 0;
or by starting with the first two stages 1, then 1 0, and then appending
to each stage the previous stage, so the next four stages are 1 0 1,
then 1 0 1 1 0, then 1 0 1 1 0 1 0 1, then 1 0 1 1 0 1 0 1 1 0 1 1 0.</p>
<p>The Push_and_Half_Shift sequence (my own ad-hoccery :-()
expands a smaller input-sequence (length N) into an output-sequence
about N**2 / 2</p>
<p>
</p>
<hr />
<h2><a name="functions">FUNCTIONS</a></h2>
<dl>
<dt><strong><a name="cycle" class="item"><em>cycle</em> ({arg1,arg2,arg3,..., ['n']=16})</a></strong></dt>

<dd>
<p>Outputs its array-arguments in a Cycle.
The named argument <strong>n</strong> specifies the number of iterations
that will be returned before a <em>nil</em> value; the default is 16.</p>
</dd>
<dt><strong><a name="leibnitz" class="item"><em>leibnitz</em> ({arg1,arg2,arg3,..., ['n']=16})</a></strong></dt>

<dd>
<p>Outputs its array-arguments in a Leibnitz sequence.  If N terms are to be
output, there must be at least enough arguments (K) so that:
2^K &gt; N
The named argument <strong>n</strong> specifies the number of iterations
that will be returned before a <em>nil</em> value; the default is 16.</p>
</dd>
<dt><strong><a name="morse_thue" class="item"><em>morse_thue</em> ({arg1,arg2,arg3,..., ['n']=16})</a></strong></dt>

<dd>
<p>Outputs its array-arguments in a Morse-Thue sequence.
The named argument <strong>n</strong> specifies the number of iterations
that will be returned before a <em>nil</em> value; the default is 16.</p>
</dd>
<dt><strong><a name="rabbit" class="item"><em>rabbit</em> ({arg1,arg2, ['n']=21})</a></strong></dt>

<dd>
<p>Outputs its array-arguments in a Rabbit sequence.
There must be two arguments (if there are more, the others are ignored).
The named argument <strong>n</strong> specifies the number of iterations
that will be returned before a <em>nil</em> value; the default is 21.</p>
</dd>
<dt><strong><a name="push_and_half_shift" class="item"><em>push_and_half_shift</em> ({arg1,arg2,arg3,..., ['n']=999})</a></strong></dt>

<dd>
<p>Expands its arguments with a homebrew push-and-half-shift algorithm,
by repeatedly outputting a sub-block of those arguments.
The block starts with just the initial argument, and this is output.
At each stage, for as long as there are arguments left
the next argument is pushed onto to the end of the block,
and every alternate stage, the first note is shifted off the beginning;
then the block is appended to the output.</p>
<p>By this method,
the output starts at the first argument and ends at the last argument.
But it takes longer to make the journey:
for example, 4 arguments expand to 16, 5 expand to 19,
6 to 30, 7 to 34, and 8 to 48.</p>
</dd>
<dt><strong><a name="gen07" class="item"><em>gen07</em> ({a, n1, b, n2, c, n3 ...., size=24, n=72, int=false})</a></strong></dt>

<dd>
<p>Constructs sequences from segments of straight lines;
modelled on the Csound GEN07 routine.
The <em>a, b, c, etc</em> are ordinate values.
The <em>n1, n2, n3, etc</em> are the lengths of each segment;
they should be integers, and they may not be negative,
but zero is meaningful for specifying discontinuous waveforms.
Their total will be the <strong>size</strong>, the period of the final sequence.</p>
<p>The named argument <strong>n</strong> specifies the number of iterations
that will be returned before a <em>nil</em> value;
the default is three times the <strong>size</strong>.
If <strong>n</strong> is zero, the iterator will not terminate.</p>
<p>The named argument <strong>int</strong> specifies f the values
should be rounded to integers; the default is <strong>false</strong></p>
</dd>
<dt><strong><a name="gen09" class="item"><em>gen09</em> ({pna,stra,phsa,  pnb,strb,phsb,  etc.., size=24, n=72, min=-1.0, max=1.0, int=false})</a></strong></dt>

<dd>
<p>Constructs sequences by summing sine-waves;
modelled on the Csound GEN09 routine.
<strong>pna, pnb,</strong> etc are the <em>Partial numbers</em>,
relative to a fundamental that would occupy <strong>n</strong> locations per cycle;
these must be positive, but do not have to be integers.</p>
<p><strong>stra, strb,</strong> etc are the Strengths of the partials pna, pnb etc.
There are relative strengths,
since the composite waveform may be rescaled later.
Negative values would imply phase-inversion.</p>
<p><strong>phsa, phsb,</strong> etc are the initial Phases of the partials pna, pnb etc,
expressed in degrees.</p>
<p>The named arguments <strong>n</strong> and <strong>int</strong> are as described in <strong>gen07</strong>,
plus three new ones:</p>
<p>The named argument <strong>size</strong> specifies the period of the cycle;
the default is 24.</p>
<p>The named argument <strong>min</strong> specifies the minimum value
in the composite waveform; the default is -1.</p>
<p>The named argument <strong>max</strong> specifies the maximum value
in the composite waveform; the default is +1.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h2><a name="download">DOWNLOAD</a></h2>
<p>This module may soon be available as a LuaRock...</p>
<p>The source is available in
<a href="http://www.pjb.com.au/comp/lua/Sequence.lua">http://www.pjb.com.au/comp/lua/Sequence.lua</a>
for you to install in your LUA_PATH</p>
<p>The test script used during development is
<a href="http://www.pjb.com.au/comp/lua/test_se.lua">http://www.pjb.com.au/comp/lua/test_se.lua</a>
which requires the DataDumper.lua module.</p>
<p>
</p>
<hr />
<h2><a name="author">AUTHOR</a></h2>
<p>Peter J Billam, <a href="http://www.pjb.com.au/comp/contact.html">http://www.pjb.com.au/comp/contact.html</a></p>
<p>
</p>
<hr />
<h2><a name="see_also">SEE ALSO</a></h2>
<pre>
 &quot;Fractals, Chaos, Power Laws&quot;, Manfred Schroeder, Freeman, 1991
 <a href="http://www.pjb.com.au/">http://www.pjb.com.au/</a>
 <a href="http://www.pjb.com.au/comp/index.html#lua">http://www.pjb.com.au/comp/index.html#lua</a>
 <a href="http://www.pjb.com.au/comp/lua/Sequence.html">http://www.pjb.com.au/comp/lua/Sequence.html</a>
 <a href="http://www.pjb.com.au/comp/lua/Sequence.lua">http://www.pjb.com.au/comp/lua/Sequence.lua</a>
 <a href="http://www.pjb.com.au/comp/lua/test_se">http://www.pjb.com.au/comp/lua/test_se</a>
 <a href="http://www.pjb.com.au/comp/lua/MIDI.html">http://www.pjb.com.au/comp/lua/MIDI.html</a>
 <a href="http://www.pjb.com.au/midi/sequence.html">http://www.pjb.com.au/midi/sequence.html</a>
 <a href="http://www.csounds.com/">http://www.csounds.com/</a>
 <a href="http://www.csounds.com/manual/html/ScoreGenRef.html">http://www.csounds.com/manual/html/ScoreGenRef.html</a></pre>

</body>

</html>
